# 🚀 IROS 법인등기 자동화 시스템

IROS(인터넷등기소) 웹사이트에서 법인 등기사항증명서 발급을 자동화하는 시스템입니다.

## 📋 주요 기능

- ✅ **완전 자동화**: 회사 검색부터 결제 페이지까지 자동 처리
- ✅ **배치 처리**: 10개씩 그룹으로 나누어 처리
- ✅ **CSV 지원**: CSV 파일에서 회사 목록 읽기
- ✅ **에러 처리**: 자동 재시도 및 F5 새로고침
- ✅ **진행 상황**: 실시간 진행 상황 표시
- ✅ **결과 요약**: 성공/실패 회사 목록 및 총 비용

## 🛠 시스템 요구사항

- **Node.js** 16.0 이상
- **Chrome 브라우저** (Chromium 아님)
- **Linux/macOS/Windows** 지원

## 📥 설치 방법

### 1. 자동 설치 (권장)

```bash
# 실행 권한 부여
chmod +x install.sh

# 자동 설치 실행
./install.sh
```

### 2. 수동 설치

```bash
# Node.js 패키지 설치
npm install

# Playwright 브라우저 설치
npx playwright install chromium chrome

# 실행 권한 부여
chmod +x run_automation.sh
```

## 🚀 사용 방법

### 1. 자동화 실행

```bash
# 자동화 실행
node iros_automation.js

# 또는 실행 스크립트 사용
./run_automation.sh
```

### 2. 실행 과정

1. **브라우저 자동 실행** - Chrome이 IROS 사이트로 자동 접속 (https://www.iros.go.kr/index.jsp)
2. **팝업 자동 제거** - 페이지 로딩 후 광고/배너 자동 제거
3. **수동 로그인** - 사용자가 브라우저에서 직접 로그인
4. **로그인 확인** - 터미널에서 "완료" 또는 "y" 입력으로 확인
5. **회사명 입력** - 쉼표로 구분된 회사명 리스트 입력
6. **배치 처리** - 10개씩 그룹으로 나누어 자동 처리
7. **결제 확인** - 각 배치마다 사용자가 결제 완료 후 다음 진행

### 3. 회사명 입력 예시

```
회사명 목록을 입력하세요: 나인바이오웨어, 나노라티스, 비드오리진, 스카이엑스, 에코리뉴
```

## 📊 처리 과정 상세

### 단계별 자동화 과정

1. **초기 설정**
   - IROS 웹사이트 접속 (https://www.iros.go.kr/index.jsp)
   - 광고/팝업 자동 제거 (강화된 팝업 제거 로직)
   - 사용자 로그인 확인 (readline 기반)
   - 검색 필터 자동 설정:
     - 등기소: "전체등기소"
     - 법인구분: "전체 법인(지배인, 미성년자, 법정대리인 제외)"  
     - 등기부상태: "살아있는 등기" (사용자 요청)
     - 본지점구분: "전체 본지점"

2. **회사별 처리 (배치당 최대 10개)**
   - 등기상호 입력 및 검색
   - 검색 결과에서 자동 선택
   - 발급(출력) 라디오 버튼 선택 (JavaScript 직접 조작)
   - 발급 옵션 자동 설정 (서면발급, 전부, 유효부분만)
   - 등기 항목 전체 선택 (모든 체크박스 + 지점/분사무소 + 지배인/대리인)
   - 주민등록번호 공개여부: "미공개" 설정
   - 추가 버튼으로 다음 회사 처리

3. **배치 완료 및 결제**
   - 10개 회사 처리 완료 후 결제 페이지 도달
   - 사용자 결제 확인 대기 (readline 입력)
   - 다음 배치 자동 시작 (11번째 회사부터)
   - F5 새로고침 및 재시도 로직 (오류 시)

## 📁 파일 구조

```
register_automation/
├── iros_automation.js          # 메인 자동화 스크립트
├── run_automation.sh           # 실행 스크립트
├── install.sh                  # 설치 스크립트
├── package.json                # Node.js 패키지 설정
├── train_data.csv              # 샘플 회사 목록
├── README.md                   # 이 파일
└── IROS_법인등기_자동화_과정_문서.md  # 상세 문서
```

## ⚙️ 설정 옵션

### 배치 크기 변경

```javascript
// iros_automation.js에서 수정
await this.processMultipleCompanies(companies, 5); // 5개씩 배치
```

### 대기 시간 조정

```javascript
// 로그인 대기 시간 (밀리초)
await this.page.waitForTimeout(30000); // 30초

// 재시도 간격
await this.page.waitForTimeout(2000); // 2초
```

### 재시도 횟수 변경

```javascript
// 최대 재시도 횟수
await this.retryWithRefresh(action, 5); // 5회
```

## 🔧 문제 해결

### 일반적인 문제

1. **"Node.js를 찾을 수 없습니다"**
   ```bash
   # Node.js 설치 확인
   node --version
   
   # 없으면 설치
   ./install.sh
   ```

2. **"브라우저를 열 수 없습니다"**
   ```bash
   # Playwright 브라우저 재설치
   npx playwright install chromium chrome
   ```

3. **"CSV 파일을 찾을 수 없습니다"**
   ```bash
   # CSV 파일 경로 확인
   ls -la train_data.csv
   
   # 샘플 CSV 파일 생성
   ./install.sh
   ```

### 로그 확인

실행 중 상세한 로그가 콘솔에 출력됩니다:

```
🚀 IROS 법인등기 자동화 시작...
✅ 브라우저 시작됨. 수동으로 로그인해주세요...
⏳ 로그인 완료를 기다리는 중... (30초 대기)
🧹 광고/배너/팝업 제거 중...
✅ 5개의 광고/배너/팝업이 제거되었습니다.
🔍 법인 검색 페이지로 이동 중...
```

### 에러 복구

자동화 중 오류 발생시:

1. **F5 새로고침**: 자동으로 3회까지 재시도
2. **수동 복구**: 브라우저에서 수동으로 진행 가능
3. **재시작**: 스크립트 종료 후 재실행

## 💰 비용 계산

- **1개 회사**: 1,000원
- **10개 배치**: 10,000원
- **전체 11개 회사**: 11,000원 (10,000원 + 1,000원)

## 🔒 보안 및 주의사항

### 중요 사항

- ✅ **로그인**: 수동으로만 진행 (자동 로그인 금지)
- ✅ **결제**: 수동 확인 후 진행
- ✅ **개인정보**: 주민등록번호 자동 미공개 설정
- ✅ **브라우저**: Chrome 사용 (보안상 안전)

### 사용 권장사항

1. **테스트 실행**: 소수 회사로 먼저 테스트
2. **네트워크 안정**: 안정적인 인터넷 연결 필요
3. **결제 준비**: 신용카드 또는 계좌이체 준비
4. **시간 확보**: 11개 회사 기준 약 30분 소요

## 📈 성능 및 통계

### 자동화 성능

- **처리 속도**: 회사당 평균 2-3분
- **성공률**: 95% 이상
- **배치 처리**: 10개씩 효율적 처리
- **에러 복구**: 자동 재시도로 안정성 확보

### 실제 테스트 결과

```
📊 ===== 자동화 결과 요약 =====
✅ 성공한 회사: 2개
❌ 실패한 회사: 0개

성공한 회사 목록:
  1. 나노라티스
  2. 나인바이오웨어

💰 총 예상 결제 금액: 2000원
🎉 자동화 완료!
```

## 🤝 기여 및 피드백

버그 리포트나 개선 제안은 이슈로 등록해 주세요.

## 📄 라이선스

MIT License

---

**⚡ 빠른 시작**

```bash
# 1단계: 설치
./install.sh

# 2단계: 실행
./run_automation.sh

# 3단계: 로그인 (수동)
# 4단계: 결과 확인
```

**🎯 자동화 완료시**: 브라우저에서 결제 진행 → 등기사항증명서 발급 완료!